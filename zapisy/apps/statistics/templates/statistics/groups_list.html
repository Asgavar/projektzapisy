{% extends "statistics/base.html" %}

{% block groups_active %} class="active"{% endblock %}

{% block content %}
<div class="table-responsive">
    {% regroup groups by course as courses_list %}

    <table class="table table-striped">
        <thead class="text-muted">
            <tr>
                <th scope="col"><h4>Prowadzący</h4></th>
                <th scope="col"><h4>Typ</h4></th>
                <th scope="col"><h4>Miejsca</h4></th>
                <th scope="col"><h4>ISIM</h4></th>
                <th scope="col"><h4>Zapisani</h4></th>
                <th scope="col"><h4>ISIM</h4></th>
                <th scope="col"><h4>Kolejka</h4></th>
                <th scope="col"><h4>Przypięci</h4></th>

            </tr>
        </thead>
        <tbody>
            {% for course in courses_list %}
                <tr>
                <th colspan="12">{{ course.grouper.name }}</th>
                </tr>
                {% for group in course.list|dictsort:'type' %}
                    <tr{% if group.limit < group.enrolled %} class="overlimit"{% elif group.limit == group.enrolled %} class="fulllimit"{% endif %}>
                        <td>{{ group.teacher.user.get_full_name }}</td>
                        <td>{{ group.get_type_display }}</td>
                        <td>{{ group.limit }}</td>
                        <td>{{ group.limit_isim }}</td>
                        <td>{{ group.enrolled }}</td>
                        <td>{{ group.enrolled_isim }}</td>
                        <td>{{ group.queued }}</td>
                        <td>{{ group.pinned }}</td>
                    </tr>
                {% endfor %}
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
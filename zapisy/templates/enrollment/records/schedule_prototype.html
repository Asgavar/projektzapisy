{% extends "enrollment/base.html" %}
{% load url from future %}
{% load compressed %}
{% load i18n %}

{% block main-subtitle %}{# Translators: podtytuł #}{% trans "Prototyp planu zajęć" %}{% endblock %}

{% block styles %}
    {% compressed_css 'prototype' %}
    
    {% if not allow_leave_course %}
        <style type="text/css">
            .signInOut
            {
                display: none !important;
            }
        </style>
    {% endif %}
{% endblock %}

{% block js %}
    {% compressed_js 'prototype' %}
{% endblock %}

{% block enrollment_menu_prototype %} class="active"{% endblock %}

{% block bread %}
	<a href="{% url 'main-page' %}">{% trans "Strona główna" %}</a> &raquo;
	<a href="{% url 'enrollment-main' %}">{% trans "Zapisy" %}</a> &raquo;
	{% trans "Prototyp planu" %}
{% endblock %}

{% block filter %}
	<div id="enr-schedulePrototype-top-bar" class="main-top-bar" style="display: none">
		<fieldset>
			<legend><span>{# Translators: tytuł okienka filtrowania #}{% trans "Filtrowanie" %}</span></legend>
			<div class="main-filter-input">
				<input class="text filter-phrase" type="text" />
				<input class="reset filter-phrase-reset" type="button" value="X" style="display:none;" />
			</div>
		</fieldset>
		<fieldset class="course-type-filter">
			<legend><span>{# Translators: Filtrowanie -> tytuł kawałka z checkboxami #}{% trans "Rodzaj przedmiotu" %}</span></legend>
			{% for type in types_list %}
				<span class="checkbox">
					<input type="checkbox" checked="checked" id="filter-course-type-{{ type.id }}" {% if type.meta_type %} class="filter-course-type-meta" {% endif %} value="{{ type.id }}"/>
					<input type="hidden" class="group-id" value="{{ type.group.id }}" />
					<label for="filter-course-type-{{ type.id }}"><span>{{ type.name }}</span></label>
				</span>
			{% endfor %}
		</fieldset>
		<fieldset id="enr-schedulePrototype-other">
			<legend><span>{# Translators: Filtrowanie -> tytuł kawałka z opcjami #}{% trans "Inne" %}</span></legend>
			<span class="checkbox"><input type="checkbox" id="enr-hidesigned" /><label for="enr-hidesigned">{% trans "Schowaj przedmioty, na które byłem zapisany" %}</label></span>
                        <span class="checkbox"><input type="checkbox" id="enr-courseFilter-english" checked="checked"/><label for="enr-courseFilter-english">{% trans "Pokaż przedmioty prowadzone w j.angielskim" %}</label></span>
                        <span class="checkbox"><input type="checkbox" id="enr-courseFilter-exam" checked="checked"/><label for="enr-courseFilter-exam">{% trans "Pokaż przedmioty kończące się egzaminem" %}</label></span>
                        <span class="checkbox"><input type="checkbox" id="enr-courseFilter-suggestedForFirstYear" {% if user.student.is_first_year_student %}checked="checked"{% endif %}/><label for="enr-courseFilter-suggestedForFirstYear"  style="color:red;">{% trans "Pokaż tylko przedmioty zalecane dla 1 roku" %}</label></span>
		</fieldset>
	</div>
{% endblock %}



{% block content-width %}12{% endblock %}
{% block content %}
	<form action="{% url 'records-set-locked' %}" method="post" id="enr-schedulePrototype-setLocked"><div>{% csrf_token %}
		<input type="hidden" name="ajax-url" value="{% url 'records-set-locked' '.json' %}" />
        {% if request.user.student %}
            {% if user.student.block %}
                <input type="hidden" name="lock" value="false" />
                <input type="submit" value="Odblokuj plan" />
            {% else %}
                <input type="hidden" name="lock" value="true" />
                <input type="submit" value="Zablokuj plan" />
            {% endif %}
		{% endif %}
	</div></form>

	{% block messages %}{% endblock %}{% include 'common/messages.html' %}

	<div id="enr-schedulePrototype-scheduleContainer">
		<p>{% trans "Nie masz włączonej obsługi javascript &ndash; aplikacja prototypu planu nie może bez niej działać" %}.</p>
		<input type="hidden" name="courses" value="{{ courses_json }}" />
		<input type="hidden" name="groups" value="{{ groups_json }}" />
		<input type="hidden" name="ajax-set-enrolled-url" value="{% url 'records-set-enrolled' '.json' %}" />
		<input type="hidden" name="ajax-set-pinned-url" value="{% url 'schedule-prototype-set-pinned' %}" />
		<input type="hidden" name="ajax-set-queue-priority-url" value="{% url 'records-set-queue-priority' '.json' %}" />
		<input type="hidden" name="priority-limit" value="{{ priority_limit }}" />
	</div>
    <ul id="schedule-legend">
        <li>
            <div class="legend-box enrolled"></div> - {% trans "jesteś zapisany do tej grupy" %}
        </li>
        <li>
            <div class="legend-box queued"></div> - {% trans "jesteś w kolejce do tej grupy" %}
        </li>
        <li>
            <div class="legend-box pinned"></div> - {% trans "grupa przypięta do prototypu" %}
        </li>
        <li>
            <div class="legend-box icons pinIn"></div> - {% trans "przypnij do prototypu. Widoczność grupy w prototypie zostaje zapamiętana. Przycisk <strong>NIE</strong> zapisuje na zajęcia" %}.
        </li>
        <li>
            <div class="legend-box icons pinOut"></div> - {% trans "odepnij od prototypu. Przywraca domyślną widoczność grupy w prototypie. Przycisk <strong>NIE</strong> wypisuje z zajęć" %}.
        </li>
        <li>
            <div class="legend-box icons signIn"></div> - {% trans "zapisz do grupy. Następuje próba zapisu studenta do grupy. Jeżeli przedmiot posiada również wykład, zostaniemy zapisanie na niego automatycznie" %}.
        </li>
        <li>
            <div class="legend-box icons signOut"></div> - {% trans "wypisz z grupy. Następuje wypisanie z grupy. Wypisanie z wykładu skutkuje wypisaniem się z pozostałych grup przedmiotu" %}.
        </li>
    </ul>
{% endblock %}

{% block sidebar-width %}4{% endblock %}
{% block sidebar %}
	<div id="main-sidebar" class="prototype-sidebar">
		{# Translators: tytuł nad sidebarem #}
		<h3>{% trans "Semestr" %} {{ semester }}</h3>
        <hr>
		<ul id="enr-schedulePrototype-course-list">
			{% for course in courses %}
			<li>
				<span class="checkbox"><input type="checkbox" id="enr-schedulePrototype-course-{{ course.id }}" /></span>
				<label for="enr-schedulePrototype-course-{{ course.id }}">{{ course.name }}</label>
				<input type="hidden" name="id" value="{{ course.id }}" />
				<input type="hidden" name="type" value="{{ course.type }}" />
				<input type="hidden" name="short" value="{{ course.short }}" />
				<input type="hidden" name="wasEnrolled" value="{{ course.was_enrolled }}" />
				<input type="hidden" name="english" value="{{ course.english }}" />
				<input type="hidden" name="exam" value="{{ course.exam }}" />
				<input type="hidden" name="suggested_for_first_year" value="{{ course.suggested_for_first_year }}" />
				<input type="hidden" name="isRecordingOpen" value="{{ course.is_recording_open }}" />
				<input type="hidden" name="url" value="{% url 'course-page' course.slug %}" />
				{% for term in course.terms %}
					<input type="hidden" name="term" value="{{ term.json }}" />
				{% endfor %}
			</li>
			{% endfor %}
		</ul>
	</div>
{% endblock %}

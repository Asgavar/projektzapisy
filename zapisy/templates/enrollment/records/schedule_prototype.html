{% extends "enrollment/base.html" %}
{% load url from future %}
{% load compressed %}
{% load i18n %}

{% block main-subtitle %}{# Translators: podtytuł #}{% trans "Prototyp planu zajęć" %}{% endblock %}

{% block styles %}
    {% compressed_css 'prototype' %}
    
    {% if not allow_leave_course%}
        <style type="text/css">
            .enrolledSignOutButton
            {
                display: none !important;
            }
        </style>
    {% endif %}
{% endblock %}

{% block js %}
    {% compressed_js 'prototype' %}
{% endblock %}

{% block topContent %}
{% include "common/course_list_filters.html" %}
{% endblock %}

{% block enrollment_menu_prototype %} class="active"{% endblock %}

{% block bread %}
	<a href="{% url 'main-page' %}">{% trans "Strona główna" %}</a> &raquo;
	<a href="{% url 'enrollment-main' %}">{% trans "Zapisy" %}</a> &raquo;
	{% trans "Prototyp planu" %}
{% endblock %}

{% block content-width %}12{% endblock %}
{% block content %}
    {% comment %}
	<form action="{% url 'records-set-locked' %}" method="post" id="enr-schedulePrototype-setLocked"><div>{% csrf_token %}
		<input type="hidden" name="ajax-url" value="{% url 'records-set-locked' '.json' %}" />
        {% if request.user.student %}
            {% if user.student.block %}
                <input type="hidden" name="lock" value="false" />
                <input type="submit" value="Odblokuj plan" />
            {% else %}
                <input type="hidden" name="lock" value="true" />
                <input type="submit" value="Zablokuj plan" />
            {% endif %}
		{% endif %}
	</div></form>
	{% endcomment %}

	{% block messages %}{% endblock %}{% include 'common/messages.html' %}
    <div id="scheduleData">
        <input type="hidden" id="courses_list_json" value='{{ courses_json|safe }}' />
		<input type="hidden" id="courses_groups" value="{{ groups_json }}" />
		<input type="hidden" name="ajax-set-enrolled-url" value="{% url 'records-set-enrolled' '.json' %}" />
		<input type="hidden" name="ajax-set-pinned-url" value="{% url 'schedule-prototype-set-pinned' %}" />
		<input type="hidden" name="ajax-set-queue-priority-url" value="{% url 'records-set-queue-priority' '.json' %}" />
		<input type="hidden" name="priority-limit" value="{{ priority_limit }}" />
    </div>
	
	<div id="enr-schedulePrototype-scheduleContainer">
		<p>{% trans "Nie masz włączonej obsługi JavaScript &ndash; aplikacja prototypu planu nie może bez niej działać" %}.</p>
	</div>
    <ul id="schedule-legend">
        <li>
            <div class="legend-box enrolled"></div> - {% trans "jesteś zapisany do tej grupy" %}
        </li>
        <li>
            <div class="legend-box queued"></div> - {% trans "jesteś w kolejce do tej grupy" %}
        </li>
        <li>
            <div class="legend-box pinned"></div> - {% trans "grupa przypięta do prototypu" %}
        </li>
        <li>
            <div class="legend-box icons pinIn"></div> - {% trans "przypnij do prototypu. Widoczność grupy w prototypie zostaje zapamiętana. Przycisk <strong>NIE</strong> zapisuje na zajęcia" %}.
        </li>
        <li>
            <div class="legend-box icons pinOut"></div> - {% trans "odepnij od prototypu. Przywraca domyślną widoczność grupy w prototypie. Przycisk <strong>NIE</strong> wypisuje z zajęć" %}.
        </li>
        <li>
            <div class="legend-box icons signIn"></div> - {% trans "zapisz do grupy. Następuje próba zapisu studenta do grupy. Jeżeli przedmiot posiada również wykład, zostaniemy zapisanie na niego automatycznie" %}.
        </li>
        <li>
            <div class="legend-box icons signOut"></div> - {% trans "wypisz z grupy. Następuje wypisanie z grupy. Wypisanie z wykładu skutkuje wypisaniem się z pozostałych grup przedmiotu" %}.
        </li>
    </ul>
{% endblock %}

{% block sidebar-width %}4{% endblock %}
{% block sidebar %}
	<div id="main-sidebar" class="prototype-sidebar">
		{# Translators: tytuł nad sidebarem #}
		<h3>{% trans "Semestr" %} {{ semester }}</h3>
		<a id="enr-schedulePrototype-uncheckAll">Odznacz wszystkie</a>
        <hr>
		<ul id="enr-schedulePrototype-course-list">
		</ul>
	</div>
{% endblock %}

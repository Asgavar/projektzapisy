{% extends "enrollment/base.html" %}
{% load compressed %}
{% load cache %}
{% load i18n %}
{% load static %}
{% load render_bundle from webpack_loader %}
{% block rendered_bundles %}
    {% render_bundle "courses-course-list" %}
{% endblock %}

{% block sidebar %}
    {% cache 3600 courses_list request.user %}
        <div class="row">
            <div class="col-9 p-0">
                <div class="alert alert-info alert-dismissible fade show">
                    <p>{% trans "Wybierz przedmiot z listy" %}</p>
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            </div>
            <div id="main-sidebar" class="col-3 pl-2">
                <div id="course-list">
                    <p class="main-side-message" id="fetchingListMessage">
                        Pobieranie listy przedmiotów...
                        <img src="{% static "images/loading.gif" %}">
                    </p>
                    <div class="semester" id="mainCoursesContainer">
                        {# Translators: Tytuł nad sidebarem  #}
                        <h3>{% trans "Semestr" %}
                            <span id="current_semester_year">{{ default_semester.year }}</span>&nbsp;<span
                                    id="current_semester_type">{{ default_semester.get_type_display }}</span>
                        </h3>
                        <input type="hidden" id="semester_id" value="{{ default_semester.id }}"/>
                        <!-- The course list the server sends to us when we first load the page,
                        then if the user changes the semester, we download the JSON using AJAX. -->
                        <script type="application/json" id="courses_list_json">{{ courses_list_json|safe }}</script>
                        <p class="main-side-message hidden" id="noResultsMessage">
                            Do podanego filtra nie pasuje żaden przedmiot.
                        </p>
                        <ul id="courses-list">
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    {% endcache %}
{% endblock %}

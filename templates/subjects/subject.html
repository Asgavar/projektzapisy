{% extends "base.html" %}

{% block content %}
	{% if messages %}
	<ul>
	    {% for message in messages %}
	    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
	    {% endfor %}
	</ul>
	{% endif %}
	<h1>{{subject.name}}</h1>
	<ul>
		<li>Wykłady: {{subject.lectures}} godz.</li>
		<li>Ćwiczenia: {{subject.exercises}} godz.</li>
		<li>Pracownia: {{subject.laboratories}} godz.</li>	
	</ul>
	
	<h2>Grupy:</h2>
	
	<h3>Wykłady:</h3>
    <ul>
	{% for lec in lectures %}
		<li>Prowadzący: {{lec.teacher.user.get_full_name }}<br/> sala: 
			{{ lec.classroom.all|join:", " }} 
			<br />
			Ilość miejsc: {{ lec.get_group_limit }}, zajętych: {{ lec.enrolled}}<br />
			<ul>
			{% for d in lec.get_all_terms|dictsort:"dayOfWeek" %} {% comment %} Set order ;){% endcomment %}
			   <li>{{d}}</li>
			{% endfor %}
			</ul>
        </li>

		<a href='/records/change/{{ lec.id }}'>{% if not lec.signed %}{% ifnotequal lec.get_group_limit lec.enrolled %}zapisz{% endifnotequal %}{% else %}wypisz{% endif %}</a>
		{% empty %}brak
	{% endfor %}
	</ul>

	
	<h3>Ćwiczenia</h3>
    <ul>
	{% for exe in exercises %}
		<li>Prowadzący: {{exe.teacher.user.get_full_name }}<br/> sala: 
			{{ exe.classroom.all|join:", " }} 
			<br />
			Ilość miejsc: {{ exe.get_group_limit }}, zajętych: {{ exe.enrolled}}<br />
			<ul>
			{% for d in exe.get_all_terms|dictsort:"dayOfWeek" %} {% comment %} Set order ;){% endcomment %}
			   <li>{{d}}</li>
			{% endfor %}
			</ul>
        </li>
		<a href='/records/change/{{ exe.id }}'>{% if not exe.signed %}{% ifnotequal exe.get_group_limit exe.enrolled %}zapisz{% endifnotequal %}{% else %}wypisz{% endif %}</a>
		{% empty %}brak
	{% endfor %}
	</ul>
	
	<h3>Pracownie</h3>
	    <ul>
	{% for lab in laboratories %}
		<li>Prowadzący: {{lab.teacher.user.get_full_name }}<br/> sala: 
			{{ lab.classroom.all|join:", " }} 
			<br />
			Ilość miejsc: {{ lab.get_group_limit }}, zajętych: {{ lab.enrolled}}<br />
			<ul>
			{% for d in lab.get_all_terms|dictsort:"dayOfWeek" %} {% comment %} Set order ;){% endcomment %}
			   <li>{{d}}</li>
			{% endfor %}
			</ul>
        </li>
		<a href='/records/change/{{ lab.id }}'>{% if not lab.signed %}{% ifnotequal lab.get_group_limit lab.enrolled %}zapisz{% endifnotequal %}{% else %}wypisz{% endif %}</a>
		{% empty %}brak
	{% endfor %}
	</ul>
	
{% endblock %}
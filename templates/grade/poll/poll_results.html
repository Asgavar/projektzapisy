{% extends "grade/base.html" %}

{% block styles %}
<style>

    #sitemap, #sitemap ul, #sitemap li{
    margin:0;
    padding:0;
    list-style:none;
    }
    #sitemap{}
    #sitemap ul{
    display:none;
    }
    #sitemap li{
    line-height:200%;
    margin-top:1px;
    background:#eee;
    position:relative;
    width:100%;
    }
    /* IE leaves a blank space where span is added so this is to avoid that */
    * html #sitemap li{
    float:left;
    display:inline;
    }
    #sitemap li a{padding-left:28px;}
    #sitemap li span{float:left;position:absolute;top:5px;left:5px;width:13px;height:13px;cursor:auto;font-size:0;}
    #sitemap li span, #sitemap li span.collapsed{background:url(collapsed.gif) no-repeat 0 0;}
    #sitemap li span.expanded{background:url(expanded.gif) no-repeat 0 0;}
    /* second level */
    #sitemap li li{
    background:#fff;
    }
    #sitemap li li a{padding-left:56px;}
    #sitemap li li span{left:28px;}
    /* third level */
    #sitemap li li li a{padding-left:84px;}
    #sitemap li li li span{left:56px;}
    /* etc. */
    /* */
    
#container{
	margin:0 auto;
	width:680px;
	background:#fff;
	padding-bottom:20px;
}
#content{margin:0 20px;}
p{
	margin:0 auto;
	width:680px;
	padding:1em 0;
}

</style>
{% endblock %}

{% block js %}
<script src="/site_media/js/grade/poll/poll_results.js" type="text/javascript"></script>
<script type="text/javascript">
/*

	Sitemap Styler v0.1
	written by Alen Grakalic, provided by Css Globe (cssglobe.com)
	visit http://cssglobe.com/lab/sitemap_styler/

*/

this.sitemapstyler = function(){
	var sitemap = document.getElementById("sitemap")
	if(sitemap){

		this.listItem = function(li){
			if(li.getElementsByTagName("ul").length > 0){
				var ul = li.getElementsByTagName("ul")[0];
				ul.style.display = "none";
				var span = document.createElement("span");
				span.className = "collapsed";
				span.onclick = function(){
					ul.style.display = (ul.style.display == "none") ? "block" : "none";
					this.className = (ul.style.display == "none") ? "collapsed" : "expanded";
				};
				li.appendChild(span);
			};
		};

		var items = sitemap.getElementsByTagName("li");
		for(var i=0;i<items.length;i++){
			listItem(items[i]);
		};

	};
};

window.onload = sitemapstyler;

</script>
{% endblock %}

{% load news_extras %}

{% block content-class %}wide{% endblock %}

{% block main-navigation %}
    <li><a href="/">Strona Główna</a></li>
    <li><a href="{% url grade-main %}">Ocena zajęć</a></li>
    <li>Wyniki oceny</li>
{% endblock %}

{% block content %}
{#<!-- NA GÓRĘ MA IŚĆ PASEK FILTRÓW! -->#}


{% if polls_by_course and polls_by_teacher %}
    <div id="results-content">
    {% block results %}
    {% endblock %}
    </div>
{% else %}
    <div class="main-message">
        Nie posiadasz uprawnień do oglądania żadnych wyników.
    </div>
{% endif %}
{% endblock %}

{% block sidebar %}
    <input type="hidden" id="poll-id" value="{% if pid %}{{pid}}{% else %}-1{% endif %}">
    <input type="hidden" id="display-mode" value="{{mode}}">

	<div id="main-sidebar">
		<div id="course-list">
				<div class="semester">
					<h3>Przedmioty</h3>
                    <ul id="results-by-course-list">
                        {% for poll_list in polls_by_course %}
                        <li><h4><a class="list-link" href="">{{ poll_list.0 }}</a></h4>
                        <ul class="result-groupped-list">
                            {% for poll in poll_list.1 %}
                            <li><a id="results-by-course-{{ poll.id }}"
                                   class="result-poll-link"
                                   href="{% url grade-poll-poll-results 'S' poll.id %}">{{ poll.title }}
                            {% if poll.group %}
                                - {{ poll.group.get_type_display }}
                                - {{ poll.group.get_teacher_full_name }}
                            {% endif %}
                            </a></li>
                            {% endfor %}
                        </ul></li>
                        {% endfor %}
                    </ul>
                    <h3>Prowadzący</h3>

                    <ul id="results-by-teacher-list">
                        {% for poll_list in polls_by_teacher %}
                        <li><h4><a class="list-link" href="">{{ poll_list.0 }}</a></h4>
                        <ul class="result-groupped-list">
                            {% for poll in poll_list.1 %}
                            <li><a id="results-by-teacher-{{ poll.id }}"
                                   class="result-poll-link"
                                   href="{% url grade-poll-poll-results 'T' poll.id %}">{{ poll.title }}
                            {% if poll.group %}
                                - {{ poll.group.course.name }}
                                - {{ poll.group.get_type_display }}
                            {% endif %}
                            </a></li>
                            {% endfor %}
                        </ul></li>
                        {% endfor %}
                    </ul>
				</div>
		</div>
	</div>
{% endblock %}


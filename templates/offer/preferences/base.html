{% extends "offer/base.html" %}


{% block main-navigation %}
    <li><a href="/">Strona Główna</a></li>
    <li><a href="{% url latest_news 'offer' %}">Oferta</a></li>
	<li>Preferencje</li>
{% endblock %}

{% block scripts %}
	<script type="text/javascript" src="/site_media/js/jquery/jquery.cookies.2.2.0.min.js"></script>

	<script type="text/javascript" src="/site_media/js/components/sidebar.js"></script>
	<script type="text/javascript" src="/site_media/js/components/topBarFilter.js"></script>

    <script type="text/javascript" src="/site_media/js/common/subjectTypeFilter.js"></script>
	<script type="text/javascript" src="/site_media/js/offer/prefs.js"></script>
{% endblock %}

{% block styles %}
	<link rel="stylesheet" href="/site_media/css/offer/prefs.css" type="text/css" />
{% endblock %}

{% block top-bar %}
	<div id="od-prefs-top-bar" class="main-top-bar" style="display: none">
		<fieldset id="od-prefs-filter">
			<legend><span>Filtrowanie</span></legend>
			<div class="main-filter-input">
				<input class="text od-filter" id="od-prefs-q" type="text" name="q" />
				<input class="reset" id="od-prefs-reset" type="reset" value="X" style="display:none;" />
			</div>
		</fieldset>
		<fieldset id="od-prefs-subjtype">
			<legend><span>Rodzaj przedmiotu</span></legend>
			{% for type in proposalTypes %}
				<span class="checkbox od-filter-checkbox">
                    <input type="checkbox" checked="checked" id="filter-subject-type-{{ type.id }}" value="{{ type.id }}"/>
                    <input type="hidden" class="meta-type" value="{{ type.meta_type }}" />
                    <input type="hidden" class="group-id" value="{{ type.group.id }}" />
                    <label for="filter-subject-type-{{ type.id }}">{{ type.name }}</label>
                </span>
			{% endfor %}
		</fieldset>
		<fieldset id="od-prefs-other">
			<legend><span>Inne</span></legend>
			<span class="checkbox"><input type="checkbox" id="od-prefs-hidden" name="hidden" value="True"/><label for="od-prefs-hidden">Pokaż ukryte przedmioty</label></span>
            <span class="checkbox"><input type="checkbox" id="od-prefs-only-new" disabled="disabled" /><label for="od-prefs-only-new">Pokaż tylko nowe przedmioty</label></span>
		</fieldset>
	</div>
{% endblock %}

{% block sidebar-class %}{% if unset_offer %}sidebar-right sidebar-visible{% endif %}{% endblock %}
{% block sidebar %}
	{% if unset_offer %}
		<div id="main-sidebar">
			<h2>Przedmioty bez ustalonych preferencji</h2>
			<ul id="od-prefs-undecided">
                {% for prop in unset_offer %}
                    <li>
                        <input type="hidden" class="initURL" value="{% url prefs-init-pref prop.id %}" />
                        {{ prop.name }}
                    </li>
                {% endfor %}
			</ul>
		</div>
	{% endif %}
{% endblock %}

{% block comment %} TODO: do usunięcia (wraz z linkami)
    <p id="od-prefs-viewmode-selection">Widok:
        <a href="{% url prefs-list-view %}">listy</a>
        <a href="{% url prefs-tree-view %}">drzewa</a>
    </p>
{% endblock %}

{% block content %}
    {% if not prefs %}
        <p class="main-message" id="od-prefs-emptyMessage">Jeszcze nie ustaliłeś preferencji dla żadnego przedmiotu. Możesz to
            zrobić, dodając je z menu po prawej.</p>
    {% endif %}
    <form action="{% url prefs-save-all %}" method="post" id="od-prefs-form" {% if not prefs %} style="display:none" {% endif %}>
        <h2>Przedmioty z ustalonymi preferencjami</h2>

        {% block pref-list %}
        {% endblock %}

        <p id="od-prefs-submitBar"><input type="submit" value="Zapisz" /></p>
    </form>
{% endblock %}

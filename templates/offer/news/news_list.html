{% extends "offer/base-offer.html" %}

{% load news_extras %}

{% block styles %}
	<link rel="stylesheet" href="/site_media/css/od-news.css" type="text/css" />
{% endblock %}

{% block main-navigation %}
	<li><a href="{% url latest_news %}">Aktualności</a></li>
	{% if archive_view %}
		<li>Archiwum</li>
	{% endif %}
{% endblock %}

{% block top-bar %}
	<div id="od-news-top-bar">
		<form id="od-news-search-form" action="#">
			<div>
				<input type="text" name="od-news-search" id="od-news-search" value="Szukaj"/>
			</div>
		</form>

		{% if perms.news.add_news %}
			<a href="{% url news-add %}">Dodaj ogłoszenie</a>
		{% endif %}

		<div class="od-news-navigator">
			{% ifnotequal newer_no 0 %}
				<a href="{% url offer.news.views.paginated_news newer_beginwith %}" title="Najnowsze">Najnowsze</a>
				<a href="{% url offer.news.views.paginated_news newer_beginwith %}" title="Nowsze">Nowsze ({{ newer_no }})</a>
			{% endifnotequal %}
			{% ifnotequal older_no 0 %}
				<a href="{% url offer.news.views.paginated_news older_beginwith %}" title="Starsze">Starsze ({{ older_no }})</a>
			{% endifnotequal %}
			<a href="#" title="Aktualności RSS" id="od-news-rss-icon">[RSS]</a>
		</div>
		
		<div style="clear: both;"></div>
	</div>
{% endblock %}

{% block content %}
	{% for message in messages %}
	  <div class="message">{{ message }}</div>
	{% endfor %}
	{% if object_list %}
		<div class="od-news-list">
			{% for news in object_list %}
			<div class="od-news-item">
				<div class="od-news-header">
					<h2>{{ news.title }}</h2>
					<span class="od-news-date">{{ news.date|date:"l, d F Y"|lower }}</span>
				</div>
				<div class="od-news-body">
					{{ news.body|bbcode|nl2br|safe }}
				</div>
				<div class="od-news-footer">
					{{ news.author.first_name }} {{ news.author.last_name }}
					{% if perms.news.change_news %}
						<a href="{% url news-edit news.id %}">Edytuj</a>
					{% endif %}
				</div>
			</div>
			{% endfor %}
		</div>
	{% else %}
		<p>Nie ma nowych ogłoszeń.</p>
	{% endif %}
{% endblock %}

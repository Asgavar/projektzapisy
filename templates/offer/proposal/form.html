{% extends "offer/proposal/base.html" %}

{% block proposal-scripts %}
    <script type="text/javascript" src="/site_media/js/offer/proposal/form.js"></script>
{% endblock %}

{% block proposal-content %}
    <form action="" method="post" id="od-proposal-form">
        <p class="title">
            <input id="od-proposal-form-name" type="text" name="name" value="{{ proposal.name }}" />
        </p>

        <ul class="infoBox">
            <li id="od-proposal-form-types">
                Typ przedmiotu:
                <ul>
                            {% if types %}
                                {% for type in types %}
                                <li class="type">{{type.lecture_type}} {{typeName}}
                                    <select name="types[]">
                                      {% for typeName in typesName %} 
                                         <option value="{{ typeName.id }}"{% ifequal typeName.id type.lecture_type.id %} selected="selected"{% endifequal %}>{{ typeName.name }}</option>
                                      {% endfor %}
                                     </select>
                                </li>
                                {% endfor %}
                            {% else %}
                    <li class="type">
                        <select name="types[]">
                                 <option class="label" value="">- wybierz -</option>
                                 {% for typeName in typesName %}
                                 <option value="{{ typeName.id }}">{{ typeName.name }}</option>
                                 {% endfor %}
                            {% endif %}
                         </select>
                    </li>
                </ul>
            </li>
            </li>
            <li class="proposedOwner">
                <label>Zablokuj innym edycję:</label>
                <select class="main-labelledSelect" name="owner" title="ograniczona edycja">
                   <option value="no">Nie</option>
                   <option value="yes" {% if proposal.owner %}selected="selected"{% endif %}>Tak</option>
                </select>
            </li> 
            <li class="proposedTime">
                <label>Wymiar godzin:</label>
                <select class="main-labelledSelect" name="lectures" title="sugerowana ilość godzin wykładów">
                    {% if not proposal.description.lectures %}{% ifnotequal proposal.description.lectures proposalHours.0.0 %}
                        <option class="label" value="-1">w.</option>
                    {% endifnotequal %}{% endif %}
                    {% for hour in proposalHours %}
                        <option value="{{ hour.0 }}" {% ifequal proposal.description.lectures hour.0 %}selected="selected"{% endifequal %}>{{ hour.1 }}</option>
                    {% endfor %}
                </select>
                <select class="main-labelledSelect" name="repetitories" title="sugerowana ilość godzin repetytoriów">
                    {% if not proposal.description.repetitories %}{% ifnotequal proposal.description.repetitories proposalHours.0.0 %}
                        <option class="label" value="-1">r.</option>
                    {% endifnotequal %}{% endif %}
                    {% for hour in proposalHours %}
                        <option value="{{ hour.0 }}" {% ifequal proposal.description.repetitories hour.0 %}selected="selected"{% endifequal %}>{{ hour.1 }}</option>
                    {% endfor %}
                </select>
                <select class="main-labelledSelect" name="exercises" title="sugerowana ilość godzin ćwiczeń">
                    {% if not proposal.description.exercises %}{% ifnotequal proposal.description.exercises proposalHours.0.0 %}
                        <option class="label" value="-1">ćw</option>
                    {% endifnotequal %}{% endif %}
                    {% for hour in proposalHours %}
                        <option value="{{ hour.0 }}" {% ifequal proposal.description.exercises hour.0 %}selected="selected"{% endifequal %}>{{ hour.1 }}</option>
                    {% endfor %}
                </select>
                <select class="main-labelledSelect" name="laboratories" title="sugerowana ilość godzin pracowni">
                    {% if not proposal.description.laboratories %}{% ifnotequal proposal.description.laboratories proposalHours.0.0 %}
                        <option class="label" value="-1">p.</option>
                    {% endifnotequal %}{% endif %}
                    {% for hour in proposalHours %}
                        <option value="{{ hour.0 }}" {% ifequal proposal.description.laboratories hour.0 %}selected="selected"{% endifequal %}>{{ hour.1 }}</option>
                    {% endfor %}
                </select>
            </li>
            <li>
                <label for="od-proposal-form-ects">Sugerowana ilość punktów ECTS:</label>
                <input type="text" name="ects" id="od-proposal-form-ects" value="{{ proposal.description.ects }}" />
            </li>
        </ul>

        <h3>Opis przedmiotu</h3>
        <p><textarea name="description" rows="12" cols="70">{{ proposalDescription }}</textarea></p>

        <h3>Wymagania</h3>
        <p><textarea name="requirements" rows="12" cols="70">{{ proposalRequirements }}</textarea></p>

        <h3>Uwagi do potencjalnych prowadzących i dyrekcji</h3>
        <p><textarea name="comments" rows="5" cols="70">{{ proposalComments }}</textarea></p>
        
        <h3>Strona przedmiotu</h3>
        <p><input id="od-proposal-web-page" type="text" name="web-page" value="{{ proposalWWW }}"></p>
        
        <h3>Literatura:</h3>
        <div id="od-proposal-form-books">
            <ul>
                {% if books %}
                    {% for book in books %}
                        <li class="book"><input type="text" name="books[]" value="{{ book.name }}" /></li>
                    {% endfor %}
                {% else %}
                    <li class="book"><input type="text" name="books[]" /></li>
                {% endif %}
            </ul>
        </div>

        <hr />

        <p id="od-proposal-form-submitBar">
            <input class="bigButton" type="submit" value="{% if editMode %}zapisz{% else %}zgłoś przedmiot{% endif %}" />
        </p>
    </form>
{% endblock %}

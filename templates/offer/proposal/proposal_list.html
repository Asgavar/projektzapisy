{% extends "offer/base-offer.html" %}

{% load proposal_extras %}

{% block styles %}
	<link rel="stylesheet" href="/site_media/css/offer/proposal/proposal.css" type="text/css" />
{% endblock %}

{% block scripts %}
	<script type="text/javascript" src="/site_media/js/jquery-ui-1.8.1.custom.min.js"></script>
	<script type="text/javascript" src="/site_media/js/jquery.cookies.2.2.0.min.js" type="text/javascript"></script>
	
	<script type="text/javascript" src="/site_media/js/components/sidebar.js" type="text/javascript"></script>

	<script type="text/javascript" src="/site_media/js/offer/proposal/form.js"></script>
	<script type="text/javascript" src="/site_media/js/offer/proposal/history.js"></script>
	
	{% include "tinymcebbcode.html" %}
{% endblock %}

{% block main-navigation %}
	<li>Oferta</li>
	<li><a href="{% url proposal-list %}">Propozycje</a></li>
	{% if proposal %}
		{% if proposal.pk %}
			<li><a href="{% url proposal-page slug=proposal.slug %}">{{proposal.slug}}</a></li>
			{% if editMode %}
				<li>Edycja</li>
			{% endif %}
		{% else %}
			{% if editForm %}
				<li>Dodaj nową</li>
			{% endif %}
		{% endif %}
	{% endif %}
{% endblock %}

{% block content %}
	{% if message %}<div class="message">{{ message }}</div>{% endif %}
	<div id="od-proposaloffer-proposalmenu">
		<ul id="od-proposaloffer-proposallist">
			{% for sub in proposals %}
				<li {% ifequal proposal.id sub.id %}class="active"{% endifequal %}>
					<a href="{% url proposal-page slug=sub.slug %}">{{sub.name}}</a>
				</li>
			   {% empty %}<li>Brak przedmiotów</li>
			{% endfor %}
		</ul>
		<a href="/proposal/add/" id="od-proposaloffer-addlink">Dodaj przedmiot</a>
	</div>
	<div id="od-proposaloffer-contents">
		{% ifequal mode 'form' %}
			{% include 'offer/proposal/proposal_form.html' %}
		{% else %}
			{% ifequal mode 'details' %}
				{% include 'offer/proposal/proposal.html' %}
			{% else %}
				<p>Wybierz przedmiot z menu po lewej.</p>
			{% endifequal %}
		{% endifequal %}
		<div style="clear: left"></div>
	</div>
{% endblock %}

{% block sidebar-class %}sidebar-right sidebar-visible{% endblock %}

{% block sidebar %}
	<div id="main-sidebar">
		{% get_subjects_in_offer as subjects_in_offer %}
		<h2>Przedmioty w ofercie dydaktycznej</h2>
		<ul>
			{% for sub in subjects_in_offer %}
				<li>{{ sub.name }}</li>
			{% endfor %}
		</ul>
	</div>
{% endblock %}

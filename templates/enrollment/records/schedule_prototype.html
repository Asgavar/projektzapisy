{% extends "enrollment/base.html" %}

{% block main-subtitle %}Prototyp planu zajęć{% endblock %}

{% block styles %}
    {{ block.super }}
	<link rel="stylesheet" href="/site_media/css/common/schedule.css" type="text/css" />
	<link rel="stylesheet" href="/site_media/css/common/schedule-courses.css" type="text/css" />
	<link rel="stylesheet" href="/site_media/css/enrollment/schedule-prototype.css" type="text/css" />
{% endblock %}

{% block js %}
    {{ block.super }}
	<script src="/site_media/js/components/sidebar.js" type="text/javascript"></script>
	<script src="/site_media/js/components/topBarFilter.js" type="text/javascript"></script>
	<script src="/site_media/js/components/schedule.js" type="text/javascript"></script>
	<script src="/site_media/js/components/messageBox.js" type="text/javascript"></script>

	<script src="/site_media/js/common/listFilter.js" type="text/javascript"></script>
	<script src="/site_media/js/common/listFilter-courseType.js" type="text/javascript"></script>

	<script src="/site_media/js/enrollment/records/course.js" type="text/javascript"></script>
	<script src="/site_media/js/enrollment/records/course-group.js" type="text/javascript"></script>
	<script src="/site_media/js/enrollment/records/schedule-course-term.js" type="text/javascript"></script>
	<script src="/site_media/js/enrollment/views/schedule-prototype.js" type="text/javascript"></script>
{% endblock %}
 
{% block bread %}
	<a href="{% url main-page %}">Strona główna</a> &raquo;
	<a href="{% url enrollment-main %}">Zapisy</a> &raquo;
	<h2>Prototyp planu</h2>
{% endblock %}

{% block filter %}
	<div id="enr-schedulePrototype-top-bar" class="main-top-bar" style="display: none">
		<fieldset>
			<legend><span>Filtrowanie</span></legend>
			<div class="main-filter-input">
				<input class="text filter-phrase" type="text" />
				<input class="reset filter-phrase-reset" type="button" value="X" style="display:none;" />
			</div>
		</fieldset>
		<fieldset class="course-type-filter">
			<legend><span>Rodzaj przedmiotu</span></legend>
			{% for type in types_list %}
				<span class="checkbox">
					<input type="checkbox" checked="checked" id="filter-course-type-{{ type.id }}" {% if type.meta_type %} class="filter-course-type-meta" {% endif %} value="{{ type.id }}"/>
					<input type="hidden" class="group-id" value="{{ type.group.id }}" />
					<label for="filter-course-type-{{ type.id }}"><span>{{ type.name }}</span></label>
				</span>
			{% endfor %}
		</fieldset>
		<fieldset id="enr-schedulePrototype-other">
			<legend><span>Inne</span></legend>
			<span class="checkbox"><input type="checkbox" id="enr-hidesigned" /><label for="enr-hidesigned">Schowaj przedmioty, na które byłem zapisany</label></span>
                        <span class="checkbox"><input type="checkbox" id="enr-courseFilter-english" checked="checked"/><label for="enr-courseFilter-english">Pokaż przedmioty prowadzone w j.angielskim</label></span>
                        <span class="checkbox"><input type="checkbox" id="enr-courseFilter-exam" checked="checked"/><label for="enr-courseFilter-exam">Pokaż przedmioty kończące się egzaminem</label></span>
                        <span class="checkbox"><input type="checkbox" id="enr-courseFilter-suggestedForFirstYear" {% if user.student.is_first_year_student %}checked="checked"{% endif %}/><label for="enr-courseFilter-suggestedForFirstYear">Pokaż tylko przedmioty zalecane dla 1 roku</label></span>
		</fieldset>
	</div>
{% endblock %}

{% block content %}
	<form action="{% url records-set-locked %}" method="post" id="enr-schedulePrototype-setLocked"><div>
		<input type="hidden" name="ajax-url" value="{% url records-set-locked '.json' %}" />
		{% if user.student.block %}
			<input type="hidden" name="lock" value="false" />
			<input type="submit" value="Odblokuj plan" />
		{% else %}
			<input type="hidden" name="lock" value="true" />
			<input type="submit" value="Zablokuj plan" />
		{% endif %}
	</div></form>

	{% block messages %}{% endblock %}{% include 'common/messages.html' %}

	<div id="enr-schedulePrototype-scheduleContainer">
		<p>Nie masz włączonej obsługi javascript &ndash; aplikacja prototypu
			planu nie może bez niej działać.</p>
		<input type="hidden" name="courses" value="{{ courses_json }}" />
		<input type="hidden" name="groups" value="{{ groups_json }}" />
		<input type="hidden" name="ajax-set-enrolled-url" value="{% url records-set-enrolled '.json' %}" />
		<input type="hidden" name="ajax-set-pinned-url" value="{% url schedule-prototype-set-pinned %}" />
		<input type="hidden" name="ajax-set-queue-priority-url" value="{% url records-set-queue-priority '.json' %}" />
		<input type="hidden" name="priority-limit" value="{{ priority_limit }}" />
	</div>
{% endblock %}
 
{% block sidebar-class %}sidebar-right sidebar-visible sidebar-non-detachable{% endblock %}
{% block sidebar %}
	<div id="main-sidebar">
		<h2>Semestr {{ semester }}</h2>

		<ul id="enr-schedulePrototype-course-list">
			{% for course in courses %}
			<li>
				<span class="checkbox"><input type="checkbox" id="enr-schedulePrototype-course-{{ course.info.id }}" /></span>
				<label for="enr-schedulePrototype-course-{{ course.info.id }}">{{ course.info.name }}</label>
				<input type="hidden" name="id" value="{{ course.info.id }}" />
				<input type="hidden" name="type" value="{{ course.info.type }}" />
				<input type="hidden" name="short" value="{{ course.info.short }}" />
				<input type="hidden" name="wasEnrolled" value="{{ course.info.was_enrolled }}" />
				<input type="hidden" name="english" value="{{ course.info.english }}" />
				<input type="hidden" name="exam" value="{{ course.info.exam }}" />
				<input type="hidden" name="suggested_for_first_year" value="{{ course.info.suggested_for_first_year }}" />
				<input type="hidden" name="isRecordingOpen" value="{{ course.info.is_recording_open }}" />
				<input type="hidden" name="url" value="{% url course-page course.info.slug %}" />
				{% for term in course.terms %}
					<input type="hidden" name="term" value="{{ term.json }}" />
				{% endfor %}
			</li>
			{% endfor %}
		</ul>
	</div>
{% endblock %}

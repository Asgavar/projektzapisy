{% extends "enrollment/base.html" %}

{% block main-subtitle %}Prototyp planu zajęć{% endblock %}

{% block styles %}
	<link rel="stylesheet" href="/site_media/css/common/schedule.css" type="text/css" />
	<link rel="stylesheet" href="/site_media/css/common/schedule-courses.css" type="text/css" />
	<link rel="stylesheet" href="/site_media/css/enrollment/schedule-prototype.css" type="text/css" />
{% endblock %}
{% block scripts %}
	<script src="/site_media/js/components/sidebar.js" type="text/javascript"></script>
	<script src="/site_media/js/components/topBarFilter.js" type="text/javascript"></script>
	<script src="/site_media/js/components/schedule.js" type="text/javascript"></script>
	<script src="/site_media/js/components/messageBox.js" type="text/javascript"></script>

	<script src="/site_media/js/common/listFilter.js" type="text/javascript"></script>
	<script src="/site_media/js/common/listFilter-courseType.js" type="text/javascript"></script>

	<script src="/site_media/js/enrollment/records/schedule-course-term.js" type="text/javascript"></script>
	<script src="/site_media/js/enrollment/views/schedule-prototype.js" type="text/javascript"></script>
{% endblock %}
 
{% block main-navigation %}
	<li><a href="{% url main-page %}">Strona główna</a></li>
	<li><a href="{% url latest_news 'enrollment' %}">Zapisy</a></li>
	<li>Prototyp planu</li>
{% endblock %}

{% block top-bar %}
	<div id="enr-schedulePrototype-top-bar" class="main-top-bar" style="display: none">
		<fieldset>
			<legend><span>Filtrowanie</span></legend>
			<div class="main-filter-input">
				<input class="text filter-phrase" type="text" />
				<input class="reset filter-phrase-reset" type="button" value="X" style="display:none;" />
			</div>
		</fieldset>
		<fieldset class="course-type-filter">
			<legend><span>Rodzaj przedmiotu</span></legend>
			{% for type in types_list %}
				<span class="checkbox">
					<input type="checkbox" checked="checked" id="filter-course-type-{{ type.id }}" {% if type.meta_type %} class="filter-course-type-meta" {% endif %} value="{{ type.id }}"/>
					<input type="hidden" class="group-id" value="{{ type.group.id }}" />
					<label for="filter-course-type-{{ type.id }}">{{ type.name }}</label>
				</span>
			{% endfor %}
		</fieldset>
		<fieldset id="enr-schedulePrototype-other">
			<legend><span>Inne</span></legend>
			<span class="checkbox"><input type="checkbox" id="enr-hidesigned" /><label for="enr-hidesigned">Schowaj przedmioty, na które byłem zapisany</label></span>
		</fieldset>
	</div>
{% endblock %}

{% block content %}
	<form action="{% url records-set-locked %}" method="post" id="enr-schedulePrototype-setLocked"><div>
		<input type="hidden" name="ajax-url" value="{% url records-set-locked '.json' %}" />
		{% if user.student.block %}
			<input type="hidden" name="lock" value="false" />
			<input type="submit" value="Odblokuj plan" />
		{% else %}
			<input type="hidden" name="lock" value="true" />
			<input type="submit" value="Zablokuj plan" />
		{% endif %}
	</div></form>

	{% block messages %}{% endblock %}{% include 'common/messages.html' %}

	<div id="enr-schedulePrototype-scheduleContainer">
		<p>Nie masz włączonej obsługi javascript &ndash; aplikacja prototypu
			planu nie może bez niej działać.</p>
		<input type="hidden" name="pinned" value="{{ student_records.pinned }}" />
		<input type="hidden" name="enrolled" value="{{ student_records.enrolled }}" />
		<input type="hidden" name="queued" value="{{ student_records.queued }}" />

		<input type="hidden" name="setPinnedUrl" value="{% url schedule-prototype-set-pinned %}" />
		<input type="hidden" name="setEnrolledUrl" value="{% url records-set-enrolled '.json' %}" />
	</div>
{% endblock %}
 
{% block sidebar-class %}sidebar-right sidebar-visible sidebar-non-detachable{% endblock %}
{% block sidebar %}
	<div id="main-sidebar">
		<h2>Semestr {{ semester }}</h2>

		<ul id="enr-schedulePrototype-course-list">
			{% for course in courses %}
			<li>
				<span class="checkbox"><input type="checkbox" id="enr-schedulePrototype-course-{{ course.info.id }}" /></span>
				<label for="enr-schedulePrototype-course-{{ course.info.id }}">{{ course.info.name }}</label>
				<input type="hidden" name="id" value="{{ course.info.id }}" />
				<input type="hidden" name="type" value="{{ course.info.type }}" />
				<input type="hidden" name="short" value="{{ course.info.short }}" />
				<input type="hidden" name="wasEnrolled" value="{{ course.info.was_enrolled }}" />
				<input type="hidden" name="isRecordingOpen" value="{{ course.info.is_recording_open }}" />
				<input type="hidden" name="url" value="{% url course-page course.info.slug %}" />
				{% for term in course.terms %}
					<input type="hidden" name="term" value="{{ term.json }}" />
				{% endfor %}
			</li>
			{% endfor %}
		</ul>
	</div>
{% endblock %}

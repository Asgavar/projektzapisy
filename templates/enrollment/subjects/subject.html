<div>
    {% if messages %}
    <ul>
        {% for message in messages %}
        <li>{{ message }}</li>
        {% endfor %}
    </ul>
    {% endif %}
    <h1>{{subject.name}} {{subject.lol}}</h1>
    <h3>Prowadzący:</h3>
    {% for teacher in subject.teachers.all %}
    	<a href="#">{{teacher.user.get_full_name}}</a> 
    {% endfor %}
    {% if subject.ects %}
    <h4>Punkty ECTS: {{subject.ects}}</h4>
    {% endif %}
    <h4>Ilość godzin:</h4>
    <ul>
        {% if subject.lectures %}<li>Wykłady: {{subject.lectures}} godz.</li>{% endif %}
        {% if subject.exercises %}<li>Ćwiczenia: {{subject.exercises}} godz.</li>{% endif %}
        {% if subject.laboratories %}<li>Pracownia: {{subject.laboratories}} godz.</li>{% endif %}  
    </ul>
        
    <h3>Opis przedmiotu:</h3>
    <p class="subject-description">{{subject.description}}</p>
    <a>pokaż więcej...</a>
    
    {% if lectures %}
    <h3>Wykład:</h3>
    <table class="subject-details-table">
    	<thead>
    		<tr>
    			<th>Prowadzący</th><th>Termin zajęć</th><th>Max. liczba osób</th><th>Akt. liczba osób</th><th></th><th></th>
    		</tr>
    	</thead>
    	<tbody>
	    {% for lec in lectures %}
	        <tr>
		        <td>{{ lec.get_teacher_full_name }}</td>
		        <td>
		            {% for d in lec.get_all_terms|dictsort:"dayOfWeek" %}
		               {{d}}<br/>
		            {% endfor %}
		        </td>
		        <td>{{ lec.get_group_limit }}</td>
		        <td>{{ lec.enrolled }}</td>
	        	<td>
	        	{% if subject.is_recording_open %}
		        	{% if not lec.signed %}
			            {% ifnotequal lec.get_group_limit lec.enrolled %}
			                <a class="subject-details-link forget" link="{% url record-assign lec.id %}">zapisz</a>
			            {% endifnotequal %}
		        	{% else %}
		            	<a class="subject-details-link forget" link="{% url record-resign lec.id %}">wypisz</a>
		        	{% endif %}
		        {% endif %}
	        	</td>
	        	<td><a class="subject-details-link" link="{% url group-records lec.id %}">Lista zapisanych osób</a></td>
	        </tr>
    	{% endfor %}
    	</tbody>
    </table>
	{% endif %}
	
	{% if exercises %}
	<h3>Ćwiczenia:</h3>
    <table class="subject-details-table">
    	<thead>
    		<tr>
    			<th>Prowadzący</th><th>Termin zajęć</th><th>Max. liczba osób</th><th>Akt. liczba osób</th><th></th><th></th>
    		</tr>
    	</thead>
    	<tbody>
	    {% for exe in exercises %}
	        <tr>
		        <td>{{ exe.get_teacher_full_name }}</td>
		        <td>
		            {% for d in exe.get_all_terms|dictsort:"dayOfWeek" %}
		               {{d}}<br/>
		            {% endfor %}
		        </td>
		        <td>{{ exe.get_group_limit }}</td>
		        <td>{{ exe.enrolled }}</td>
	        	<td>
	        	{% if subject.is_recording_open %}
		        	{% if not exe.signed %}
			            {% ifnotequal exe.get_group_limit exe.enrolled %}
			            	{% if subject.user_enrolled_to_exercise %}
		        				<a class="subject-details-link" link="{% url record-change subject.user_enrolled_to_exercise exe.id %}">przenieś</a>
		        			{% else %}
			                	<a class="subject-details-link" link="{% url record-assign exe.id %}">zapisz</a>
			                {% endif %}
			            {% endifnotequal %}
		        	{% else %}
		            	<a class="subject-details-link" link="{% url record-resign exe.id %}">wypisz</a>
		        	{% endif %}
		        {% endif %}
	        	</td>
	        	<td><a class="subject-details-link" link="{% url group-records exe.id %}">Lista zapisanych osób</a></td>
	        </tr>
    	{% endfor %}
    	</tbody>
    </table>
    {% endif %}
	
	{% if exercises_adv %}
	<h3>Ćwiczenia (poziom zaawansowany):</h3>
    <table class="subject-details-table">
    	<thead>
    		<tr>
    			<th>Prowadzący</th><th>Termin zajęć</th><th>Max. liczba osób</th><th>Akt. liczba osób</th><th></th><th></th>
    		</tr>
    	</thead>
    	<tbody>
	    {% for ea in exercises_adv %}
	        <tr>
		        <td>{{ ea.get_teacher_full_name }}</td>
		        <td>
		            {% for d in ea.get_all_terms|dictsort:"dayOfWeek" %}
		               {{d}}<br/>
		            {% endfor %}
		        </td>
		        <td>{{ ea.get_group_limit }}</td>
		        <td>{{ ea.enrolled }}</td>
	        	<td>
	        	{% if subject.is_recording_open %}
		        	{% if not ea.signed %}
			            {% ifnotequal ea.get_group_limit ea.enrolled %}
			            	{% if subject.user_enrolled_to_eaoratory %}
		        				<a class="subject-details-link" link="{% url record-change subject.user_enrolled_to_eaoratory ea.id %}">przenieś</a>
		        			{% else %}
			                	<a class="subject-details-link" link="{% url record-assign ea.id %}">zapisz</a>
			                {% endif %}
			            {% endifnotequal %}
		        	{% else %}
		            	<a class="subject-details-link" link="{% url record-resign ea.id %}">wypisz</a>
		        	{% endif %}
		        {% endif %}
	        	</td>
	        	<td><a class="subject-details-link" link="{% url group-records ea.id %}">Lista zapisanych osób</a></td>
	        </tr>
    	{% endfor %}
    	</tbody>
    </table> 
    {% endif %}   
	
    {% if laboratories %}
	<h3>Pracownia:</h3>
    <table class="subject-details-table">
    	<thead>
    		<tr>
    			<th>Prowadzący</th><th>Termin zajęć</th><th>Max. liczba osób</th><th>Akt. liczba osób</th><th></th><th></th>
    		</tr>
    	</thead>
    	<tbody>
	    {% for lab in laboratories %}
	        <tr>
		        <td>{{ lab.get_teacher_full_name }}</td>
		        <td>
		            {% for d in lab.get_all_terms|dictsort:"dayOfWeek" %}
		               {{d}}<br/>
		            {% endfor %}
		        </td>
		        <td>{{ lab.get_group_limit }}</td>
		        <td>{{ lab.enrolled }}</td>
	        	<td>
	        	{% if subject.is_recording_open %}
		        	{% if not lab.signed %}
			            {% ifnotequal lab.get_group_limit lab.enrolled %}
			            	{% if subject.user_enrolled_to_laboratory %}
		        				<a class="subject-details-link" link="{% url record-change subject.user_enrolled_to_laboratory lab.id %}">przenieś</a>
		        			{% else %}
			                	<a class="subject-details-link" link="{% url record-assign lab.id %}">zapisz</a>
			                {% endif %}
			            {% endifnotequal %}
		        	{% else %}
		            	<a class="subject-details-link" link="{% url record-resign lab.id %}">wypisz</a>
		        	{% endif %}
		        {% endif %}
	        	</td>
	        	<td><a class="subject-details-link" link="{% url group-records lab.id %}">Lista zapisanych osób</a></td>
	        </tr>
    	{% endfor %}
    	</tbody>
    </table> 
    {% endif %} 


{% if exer_labs %}
	<h3>Ćwiczenio-pracownie:</h3>
    <table class="subject-details-table">
    	<thead>
    		<tr>
    			<th>Prowadzący</th><th>Termin zajęć</th><th>Max. liczba osób</th><th>Akt. liczba osób</th><th></th><th></th>
    		</tr>
    	</thead>
    	<tbody>
	    {% for exlab in exer_labs %}
	        <tr>
		        <td>{{ exlab.get_teacher_full_name }}</td>
		        <td>
		            {% for d in exlab.get_all_terms|dictsort:"dayOfWeek" %}
		               {{d}}<br/>
		            {% endfor %}
		        </td>
		        <td>{{ exlab.get_group_limit }}</td>
		        <td>{{ exlab.enrolled }}</td>
	        	<td>
	        	{% if subject.is_recording_open %}
		        	{% if not exlab.signed %}
			            {% ifnotequal exlab.get_group_limit exlab.enrolled %}
			            	{% if subject.user_enrolled_to_exlaboratory %}
		        				<a class="subject-details-link" link="{% url record-change subject.user_enrolled_to_exlaboratory exlab.id %}">przenieś</a>
		        			{% else %}
			                	<a class="subject-details-link" link="{% url record-assign exlab.id %}">zapisz</a>
			                {% endif %}
			            {% endifnotequal %}
		        	{% else %}
		            	<a class="subject-details-link" link="{% url record-resign exlab.id %}">wypisz</a>
		        	{% endif %}
		        {% endif %}
	        	</td>
	        	<td><a class="subject-details-link" link="{% url group-records exlab.id %}">Lista zapisanych osób</a></td>
	        </tr>
    	{% endfor %}
    	</tbody>
    </table> 
    {% endif %}   
	
	
	{% if seminar %}
	<h3>Seminarium:</h3>
    <table class="subject-details-table">
    	<thead>
    		<tr>
    			<th>Prowadzący</th><th>Termin zajęć</th><th>Max. liczba osób</th><th>Akt. liczba osób</th><th></th><th></th>
    		</tr>
    	</thead>
    	<tbody>
	    {% for sem in seminar %}
	        <tr>
		        <td>{{ sem.get_teacher_full_name }}</td>
		        <td>
		            {% for d in sem.get_all_terms|dictsort:"dayOfWeek" %}
		               {{d}}<br/>
		            {% endfor %}
		        </td>
		        <td>{{ sem.get_group_limit }}</td>
		        <td>{{ sem.enrolled }}</td>
	        	<td>
	        	{% if subject.is_recording_open %}
		        	{% if not sem.signed %}
			            {% ifnotequal sem.get_group_limit sem.enrolled %}
			            	{% if subject.user_enrolled_to_seminar %}
		        				<a class="subject-details-link" link="{% url record-change subject.user_enrolled_to_seminar sem.id %}">przenieś</a>
		        			{% else %}
			                	<a class="subject-details-link" link="{% url record-assign sem.id %}">zapisz</a>
			                {% endif %}
			            {% endifnotequal %}
		        	{% else %}
		            	<a class="subject-details-link" link="{% url record-resign sem.id %}">wypisz</a>
		        	{% endif %}
		        {% endif %}
	        	</td>
	        	<td><a class="subject-details-link" link="{% url group-records sem.id %}">Lista zapisanych osób</a></td>
	        </tr>
    	{% endfor %}
    	</tbody>
    </table> 
    {% endif %}   

	{% if language %}
	<h3>Lektorat:</h3>
    <table class="subject-details-table">
    	<thead>
    		<tr>
    			<th>Prowadzący</th><th>Termin zajęć</th><th>Max. liczba osób</th><th>Akt. liczba osób</th><th></th><th></th>
    		</tr>
    	</thead>
    	<tbody>
	    {% for lang in language %}
	        <tr>
		        <td>{{ lang.get_teacher_full_name }}</td>
		        <td>
		            {% for d in lang.get_all_terms|dictsort:"dayOfWeek" %}
		               {{d}}<br/>
		            {% endfor %}
		        </td>
		        <td>{{ lang.get_group_limit }}</td>
		        <td>{{ lang.enrolled }}</td>
	        	<td>
	        	{% if subject.is_recording_open %}
		        	{% if not lang.signed %}
			            {% ifnotequal lang.get_group_limit lang.enrolled %}
			            	{% if subject.user_enrolled_to_langoratory %}
		        				<a class="subject-details-link" link="{% url record-change subject.user_enrolled_to_langoratory lang.id %}">przenieś</a>
		        			{% else %}
			                	<a class="subject-details-link" link="{% url record-assign lang.id %}">zapisz</a>
			                {% endif %}
			            {% endifnotequal %}
		        	{% else %}
		            	<a class="subject-details-link" link="{% url record-resign lang.id %}">wypisz</a>
		        	{% endif %}
		        {% endif %}
	        	</td>
	        	<td><a class="subject-details-link" link="{% url group-records lang.id %}">Lista zapisanych osób</a></td>
	        </tr>
    	{% endfor %}
    	</tbody>
    </table> 
    {% endif %}   
	
	{% if sport %}
	<h3>Zajęcia:</h3>
    <table class="subject-details-table">
    	<thead>
    		<tr>
    			<th>Prowadzący</th><th>Termin zajęć</th><th>Max. liczba osób</th><th>Akt. liczba osób</th><th></th><th></th>
    		</tr>
    	</thead>
    	<tbody>
	    {% for ss in sport %}
	        <tr>
		        <td>{{ ss.get_teacher_full_name }}</td>
		        <td>
		            {% for d in ss.get_all_terms|dictsort:"dayOfWeek" %}
		               {{d}}<br/>
		            {% endfor %}
		        </td>
		        <td>{{ ss.get_group_limit }}</td>
		        <td>{{ ss.enrolled }}</td>
	        	<td>
	        	{% if subject.is_recording_open %}
		        	{% if not ss.signed %}
			            {% ifnotequal ss.get_group_limit ss.enrolled %}
			            	{% if subject.user_enrolled_to_ssoratory %}
		        				<a class="subject-details-link" link="{% url record-change subject.user_enrolled_to_ssoratory ss.id %}">przenieś</a>
		        			{% else %}
			                	<a class="subject-details-link" link="{% url record-assign ss.id %}">zapisz</a>
			                {% endif %}
			            {% endifnotequal %}
		        	{% else %}
		            	<a class="subject-details-link" link="{% url record-resign ss.id %}">wypisz</a>
		        	{% endif %}
		        {% endif %}
	        	</td>
	        	<td><a class="subject-details-link" link="{% url group-records ss.id %}">Lista zapisanych osób</a></td>
	        </tr>
    	{% endfor %}
    	</tbody>
    </table> 
    {% endif %}   
</div>
{% comment %}   
{% endblock %}
{% endcomment %}

{% extends "enrollment/base.html" %}

{% block styles %}
	<link rel="stylesheet" href="/site_media/css/enrollment/subjects/subjects-list.css" type="text/css" />
	<link rel="stylesheet" href="/site_media/css/offer/prefs.css" type="text/css" />
{% endblock %}

{% block scripts %}
	<script src="/site_media/js/jquery/jquery-ui-1.8.1.custom.min.js" type="text/javascript"></script>
	<script src="/site_media/js/jquery/jquery.cookies.2.2.0.min.js" type="text/javascript"></script>
	<script src="/site_media/js/components/sidebar.js" type="text/javascript"></script>
	<script src="/site_media/js/components/topBarFilter.js" type="text/javascript"></script>

	<script src="/site_media/js/common/listFilter.js" type="text/javascript"></script>
	<script src="/site_media/js/common/listFilter-subjectType.js" type="text/javascript"></script>
	<script src="/site_media/js/enrollment/views/subjects-list.js" type="text/javascript"></script>
{% endblock %}

{% block main-navigation %}
	<li><a href="{% url main-page %}">Strona główna</a></li>
	<li><a href="{% url latest_news 'enrollment' %}">Zapisy</a></li>
	<li>Przedmioty</li>
{% endblock %}

{% block top-bar %}
	<div id="enr-subjectsList-top-bar" class="main-top-bar"> <!-- TODO: domyślnie ukryty -->
		<fieldset>
			<legend><span>Filtrowanie</span></legend>
			<div class="main-filter-input">
				<input class="text filter-phrase" type="text" />
				<input class="reset filter-phrase-reset" type="button" value="X" style="display:none;" />
			</div>
		</fieldset>
		<fieldset class="subject-type-filter">
			<legend><span>Rodzaj przedmiotu</span></legend>
			{% for type in types_list %}
				<span class="checkbox">
                    <input type="checkbox" checked="checked" id="filter-subject-type-{{ type.id }}" {% if type.meta_type %} class="filter-subject-type-meta" {% endif %} value="{{ type.id }}"/>
                    <input type="hidden" class="group-id" value="{{ type.group.id }}" />
                    <label for="filter-subject-type-{{ type.id }}">{{ type.name }}</label>
                </span>
			{% endfor %}
		</fieldset>
		<fieldset id="enr-subjectsList-other">
			<legend><span>Inne</span></legend>
			<span class="selectbox">
				<label for="enr-subjectFilter-semester">Semestr:</label>
				<select id="enr-subjectFilter-semester">
					<option value="0">dowolny</option>
					{% for semester in semester_subjects %}
						<option value="{{ semester.id }}" {% if semester.is_current %} selected="selected" {% endif %}>{{ semester.name }}{% if semester.is_current %} (bieżący){% endif %}</option>
					{% endfor %}
				</select>
			</span>
			<span class="checkbox"><input type="checkbox" disabled="disabled" id="enr-hidesigned" /><label for="enr-hidesigned">Schowaj przedmioty na ktore bylem zapisany</label></span>
		</fieldset>
	</div>
{% endblock %}

{% block content %}
	<div id="subject-details">
		<p class="main-message">Wybierz przedmiot z menu po prawej.</p>
	</div>
{% endblock %}

{% block sidebar-class %}sidebar-right sidebar-visible{% endblock %}
{% block sidebar %}
	<div id="main-sidebar">
		<div id="subject-list">
			{% for semester in semester_subjects %}
				<div class="semester">
					<h2>Semestr <span>{{ semester.name }}</span></h2>
					<input type="hidden" name="semester-id" value="{{ semester.id }}" />
					<ul>
						{% for subject in semester.subjects %}
							<li>
								<a onclick="loadSubjectDetails('{{ subject.slug }}', this)" id="subject-{{ subject.id }}">{{ subject.name }}</a>
								<input type="hidden" name="type" value="{{ subject.type }}" />
							</li>
						{% endfor %}
					</ul>
				</div>
			{% endfor %}
		</div>
	</div>
{% endblock %}
